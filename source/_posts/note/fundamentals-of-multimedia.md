---
title: Note | Fundamentals of Multimedia
date: 2018-10-9
categories: Note
comments: false
tags:
  - Media
---

《多媒体技术教程》。

<!-- more -->

# 第1章 多媒体导论

## 1.1 什么是多媒体

**多媒体**是由使用多模态技术(包括文本、图像、图形、动画、视频和音频等，以及交互活动)的应用程序构成的。

多媒体的研究课题：

* 多媒体处理和编码
* 多媒体系统支持和网络
* 多媒体工具、端系统和应用程序

## 1.2 多媒体和超媒体

**超媒体(hypermedia)**并不一定是基于文本的，同样可以包含其他媒体，如图形、图像，特别是具有连续性的媒体，如声音和视频。

## 1.3 World Wide Web

**World Wide Web(万维网，简称WWW)**是目前规模最大也是最常用的超媒体应用。W3C列出了WWW的三个目标：对网络资源的普遍访问、对信息的有效浏览、对已发布内容的可靠使用。

## 1.4 多媒体软件工具概述

编曲和谱曲：Cakewalk、Cubase、Macromedia。

数字音频：Cool Edit、Sound Forge、Pro Tools。

图形和图像编辑：Adobe Illustrator、Adobe Photoshop、Macromedia Fireworks、Macromedia Freehand。

视频编辑：Adobe Premiere、Adobe After Effects、Final Cut Pro。

动画：多媒体API：Java 3D、DirectX、OpenGL；显示工具：3D Studio Max、Softimage XSI、Maya、RenderMan、GIF Animation Package。

多媒体编著：Macromedia Flash、Macromedia Director、Authorware、Quest。

# 第2章 多媒体编著和工具

## 2.1 多媒体编著

**多媒体编著**就是多媒体作品(有时又被称为“电影”或“展现”)的制作。这类应用程序帮助我们建立交互式的多媒体项目，交互的程度取决于应用本身。

在屏幕上构建理想的配色方案最简单的方法是使用互补色原理来找到文字的背景颜色。对于在0~1间取色的颜色来说，如果文本的颜色是三元组(R, G, B)，那么比较合理的背景颜色是(1-R, 1-G, 1-B)。

视频的切换：

* **剪切**：顾名思义，是在两个连续的视频帧之间执行对图像内容的剧烈变化。
* **擦拭**：用另一段视频中的内容来代替可视区域的像素，如果两个视频的边界在屏幕中缓慢移动，那么第二段视频将逐渐替代第一段视频。如从左到右、从右到左、垂直、水平、膜孔方式、钟表指针掠过方式。
* **融化**：用两段视频的混合来代替原图中的像素，以实现两段视频之间的渐变。
* **淡入淡出**：淡出使用黑白色来代替视频，淡入则相反。

融化分为**交叉融化**和**抖动融化**。淡入淡出是交叉融化，擦拭是抖动融化。

交叉融化像素点是渐变的，可以被定义为$D=(1-\alpha(t))·A+\alpha(t)·B$。A和B是表示视频A和B的三元颜色向量，$\alpha(t)$是颜色切换的函数，通常与时间t具有线性关系：$\alpha(t)=kt，kt_{max} \equiv 1$。

抖动融化视频A中的像素点将被突然被视频B所替代，这种变化是非连续的，变化的像素点的位置可以是随机的，也可以遵循一定的模式。

## 2.2 多媒体编辑和编著工具

* Adobe Premiere
* Macromedia Director
* Macromedia Flash
* Dreamweaver

## 2.3 VRML

**VRML(Virtual Reality Modeling Language, 虚拟现实建模语言)**诞生于第一届国际万维网会议，应用在Internet上的平台无关语言，VRML的目标是将有色彩的对象置于3D环境中。

VRML文件是具有`.wrl`后缀的文本文件。

# 第3章 图形和图像的数据表现

## 3.1 图形/图像的数据类型

图像由**像素(pixel)**组成，像素是数字图像中的图片元素。图像的每个像素作为一个位存储，这种图像称为**二值图像(binary image)**，也称为**1位单色(monochrome)**图像。

8位图像的每个像素有一个在0~255之间的**灰度值(gray value)**，每个像素由一个字节表示。我们称由可以看作二维数组的图像为**位图(bitmap)**。

**图像分辨率(image resolution)**指的是数字图像中的像素数目，分辨率越高则图像质量越好。二维数组必须存储在硬件中，我们称这样的硬件设备为**帧缓存(frame buffer)**。

8位图像可以看作一组1位**位平面(bitplane)**，其中每个平面由图像的1位表示组成。

**抖动(dithering)**，它的基本策略是以亮度分辨率换取空间分辨率。抖动的主要策略是用一个更大的模式替代一个像素值，这样被打印点的数量近似于用在**网板打印(halftone printing)**的油墨的变化大小的圆盘字模式。



# 第5章 视频中的基本概念

## 5.1 视频信号的类型

视频信号可以分为三类：**分量视频(Component video)**、**复合视频(Composite video)**、**S-video**。

高端视频系统粉笔使用三路视频信号来表示红、绿、蓝三种图像平面，这类视频称为**分量视频**。

在符合视频中，颜色(色度)信号和强度(亮度)信号混合成一个的载波。色度是由两种颜色分量(I和Q、U和V)构成的。

作为折中方案，S-video使用两条电线，一条用于亮度信号，另一条用于混合的色度信号。这样，颜色信息与关键的灰度信息之间的色度亮度干扰会少很多。

## 5.2 模拟视频

在电视、显示器或多媒体标准中，采用**隔行扫描(interlaced scanning)**。隔行扫描先扫描奇数行，然后扫描偶数行。这样就产生“奇数域”和“偶数域”，两个域组成一帧图像。发明隔行扫描技术是为了解决定义标准之后，很难以足够快的速度(避免图像闪动)传送一帧图像信息的问题。

产生停止图像时需要采用各种方案去除交错模式。去除交错模式最简单的方法就是摒弃其中一个扫描域，复制另一个域的扫描线，这样导致其中一个域的信息完全丢失。其他更复杂的方法都是保留两个域的信息。

NTSC TV的标准主要在北美和日本使用，采用4：3的画面比例，每秒32帧，每帧525条扫描线。NTSC采用YIQ颜色模型。

PAL(Phase Alternating Line, 逐行倒相)标准是由德国科学家设计的TV标准。PAL采用YUV颜色模型。

SECAM是由法国科学家设计的第三大广播电视标准，SECAM(System Electronique Couleur Avec Memoire)表示顺序传送与存储彩色电视系统。

## 5.3 数字视频

用数字表示每4个原始像素中多少像素值会实际发送。因此，色度而此采样方案“4:4:4”表示没有使用色度二次采样。每个像素的Y、Cb和Cr值都会被传递，每个Y、Cb、Cr都是4。

方案“4:2:2”表示Cb和Cr信号是因子为2的水平二次采样。

方案“4:2:0”与其他配合被广泛地应用到JPEG和MPEG中，在水平方向和垂直方向都进行二次采样。

# 第6章 数字音频基础

## 6.1 声音数字化

类似于光，声音是一种波动现象。在三维空间的任意一点，声波都带有可测量的压力值。

对于音频信号，采样率一般从8kHz(每秒钟8000个采样点)到48kHz。人发出的声音最高能够达到4kHz，我们的采样率的下限最少应该是这个频率的2倍。

在振幅维(或者说电压轴)的采样称为**量化(quantization)**。典型的均匀量化率是8位和16位，8位量化把纵轴分成256个区间，16位量化把纵轴分成65536个区间。

如果采样频率和语音的真实频率一致，我们会检测到一个错误的信号，它仅仅是一个常数，频率为0。如果使用语音频率的1.5倍频率来采样，我们会得到一个比真实频率小的假频(alias)，该频率只有真实频率的一半。为了得到正确的采样，我们需要使用的采样频率至少是信号中最高频率的两倍，这就是奈奎斯特采样率。

$f_{假频}=f_{采样频率}-f_{真实频率}，f_{真实频率} < f_{采样频率} < 2 \times f_{真实频率}$

在模拟系统中，随机的波动会在信号里产生**噪声(noise)**，正确信号的能量和噪声能量的比称为**信噪比(Signal-to-Noise Ratio, SNR)**。信噪比是信号质量的衡量标准之一。信噪比的常用单位是分贝(dB)，用电压平方比取10为底的对数来定义的：

$SNR=10log_{10}\frac{V^2_{信号}}{V^2_{噪声}}=20log_{10}\frac{V_{信号}}{V_{噪声}}$

## 6.2 MIDI：乐器数字化接口

MIDI是Musical Instrument Digital Interface的缩写，它规定了一套被电子音乐界广泛采用的协议，该协议使得计算机、合成器、键盘以及其他一些音乐器件能够互相交互。

MIDI键盘不会产生声音，而是产生MIDI指令序列，这些指令系列称为MIDI消息。

# 第7章 无损压缩算法

## 7.1 简介

**变长编码(VLC)**，即在编码时给出现频率较高的部分赋予较少的位数。

我们把编码器的输出称作**编码(code)**或**码字(codeword)**。如果压缩和解压缩过程中没有任何信息丢失，则这种压缩方案就是**无损的(lossless)**，否则就是**有损的(lossy)**。

**压缩率(compression ratio)**为$压缩率=\frac{B_0}{B_1}$，一般来说，我们期望具有远大于1的压缩率。

## 7.2 信息论基础

**熵**是对一个系统的无序性(disorder)的度量。熵越大，系统越无序。一般来说，当我们希望系统更有序时，我们会给系统增加负熵。

熵定义旨在从数据流中识别出经常出现的符号作为压缩位流中的候选短(short)码字。我们使用变长编码方案进行熵编码，即给频繁出现的符号分配能够快速传输的码字，而给不经常出现的符号分配较长的码字。

## 7.3 游长编码

对于有记忆的信息源，**游长编码(Run-Length Coding, RLC)**利用了信息源中的记忆。其基本思想是，如果我要压缩的信息源中的符号具有这样的性质，即同一个符号常常形成连续的片段出现，那么我们可以对这个符号以及这个片段的长度进行编码，而不是对片段中的每个符号单独编码。

## 7.4 变长编码

**变长编码(Variable-Length Coding, VLC)**是目前最著名的一种熵编码。

**香农-凡诺算法**的编码步骤如下：

1. 根据每个符号出现的频率对符号进行排序。
2. 递归地将这些符号分成两部分，每一部分中的符号具有相近的频率，直到所有的部分都只含有一个符号为止。

实现上述过程的一种很自然的方法就是建立一棵二叉树。

与自顶向下的香农-凡诺算法相比，赫夫曼编码的算法采用了自底向上的描述方式。

**赫夫曼编码**的步骤如下：

1. 根据每个符号出现的频率对符号进行排序。
2. 重复下面步骤直到列表只剩下一个符号。
   * 从列表中选出频率最低的两个符号，作为孩子节点创建一棵赫夫曼子树，并为这两个节点创建父亲节点。
   * 以孩子出现次数的总和作为父亲节点的次数，即频率，将父亲节点插入字符列表中，并保持列表的有序性。
   * 从列表中将孩子节点删除。
3. 根据从根到叶子节点的路径为每一个叶子节点赋予一个码字。

赫夫曼编码具有以下几个重要性质：**唯一前缀性质**、**最优性**(最小冗余编码，minimum-redundancy code)。

解决整数码字长度问题的一个方法就是将几个符号成组，然后为整个组赋予一个码字。这种类型的赫夫曼编码称作**扩展的赫夫曼编码(extended Huffman coding)**。

在**自适应压缩算法(adaptive compression algorithms)**中，统计数字是随着数据流的到达而动态地收集和更新的。

赫夫曼树必须总是保持其兄弟特性，也就是说所有节点都是按照计数递增的顺序排序的。所有节点按从左到右、自下而上的顺序编码。

## 7.5 基于字典的编码

**Lempel-Ziv-Welch(LZW)算法**利用了一种自适应的、基于字典的压缩技术。和变长编码方式不同，LZW使用定长的码字来表示通常会在一起出现的符号/字符的变长的字符串。

和其他的自适应压缩技术一样，LZW编码器和解码器回在接收数据时动态地创建字典。

如果LZW解压缩算法找不到编码，则认为这个编码代表符号$s+s[0]$，也就是字符+字符串+字符。

如果待压缩的数据没有任何可重复的结构，那么使用字典条目中新编码的可能性就很小。有时，这会导致**数据膨胀(data expansion)**。

## 7.6 算术编码

**算术编码(arithmetic coding)**是一种更现代化的编码方法，比赫夫曼编码更有效。

算术编码把整个消息看作一个单元，在实际中，输入数据通常被分割成块以避免错误传播。

## 7.7 无损图像压缩

在多媒体数据压缩中应用最广泛的一种压缩技术是**差分编码(differential coding)**。在差分编码中，数据减少的基础是数据流中连续符号之间存在的冗余。

当用户在图像工具中选择了100%的**质量因子(quality factor)**时，将调用无损的JPEG编码。为了保证完整性，无损的JPEG时包含在JPEG压缩标准中的。无损JPEG的压缩率总在1.0~3.0之间浮动。

# 第8章 有损压缩算法

## 8.1 简介

当图像的直方图相对平坦时，对图像数据采用无损压缩技术(如赫夫曼编码、算术编码、LZW)，其**压缩率(compression ratio)**很低。

## 8.2 失真量度

**失真量度(distortion measure)**是一个说明在某种失真标准下一个近似值与原值的接近程度的数学量。

如果关心的是像素的平均差异，常常采用**均方差(Mean Square Error,  MSE)**$\sigma^2$量度。如果关心的是相对于信号的误差大小，则可以采用**信噪比(SNR)**量度。另一个常用的失真量度是**峰值信噪比(Peak-Signal-to-Noise Ratio, PSNR)**，它测量的是相对于信号峰值$x_{peak}$的误差大小。

## 8.3 比率失真理论

有损压缩中永恒的问题就是比率和失真之间的权衡，比率就是重现源信号所需的平均位数，在本书中用比率失真函数$R(D)$来表示比率和失真之间的权衡。

D为失真容忍度，D=0是无损压缩。

## 8.4 量化

对于任何有损方法，量化都是其核心。我们所要压缩的源可能包含大量的不同的输出值，为了有效地表示源数据输出，必须通过量化把不同地值地数量大大减小。

每种算法(即每个量化器)都可以由编码器端地输入范围划分和解码器端地输出值域唯一确定。量化器的输入值和输出值可以是标量也可以是向量，这样就有了**标量量化器(scalar quantizer)**和**矢量量化器(vector quantizer)**之分。

**均匀标量量化器**将输入值域划分成等距的区间，不过有时可能需要除去两边最外部的区间。区间的端点称为量化器的**判定边界(decision boundaries)**，每个区间对应的输出值(或者重现值)取该区间的中点值，区间的长度称作**步长(step size)**，记为$\Delta$。均匀标量量化器可以分为两种，中高型(midrise)和中宽型(midtread)。

量化器引起的量化误差称作**粒度失真(granular distortion)**，如果量化器替代整个范围内的值，从最大值到$\infty$，这时的失真称为**过载(overload)失真**。

**非均匀量化**有两种常用的方法：Lloyd-Max量化器、压缩扩展量化器。

**矢量量化(VQ)**的思想和标量量化的思想类似，只不过将其扩展到了多个维度。

## 8.5 变换编码

从信息理论的基本原理可知，矢量编码比标量编码效率更高。

**离散余弦变换(DCT)**是一种广泛应用的变换编码方法，它能够以数据无关的方式解除输入信号之间的相关性。

**Karhunen-Loeve变换(KLT)**是一种可逆的线性变换，它应用了向量表述的统计学性质。

## 8.6 小波编码

另一种近年常用的分解方法是**小波变换(wavelet transform)**，它采用一组称为小波的基函数来表示信号，可以在时域和频域上都得到很好的分辨率。

小波变换有两种类型：连续小波变换(Continuous Wavelet Transform, CWT)和离散小波变换(Discrete Wavelet Transform, DWT)。CWT应用于实数域上平方可积的函数$f(x)$，DWT用于处理输入信号的离散采样。DWT和其他的离散线性变换类似，在图像处理和压缩种非常有用。

## 8.7 小波包

小波包可以看作对小波的通用化。它是系列标准正交基的离散函数$R^N$。

## 8.8 小波系数的嵌入零树

**嵌入式零树小波(Embedded Zerotree Wavelet, EZW)**算法是图像编码种一种有效且计算效率高的技术。

## 8.9 层次树的集合划分

层次树的集合划分(Set Partitioning in Hierarchical Trees, SPIHT)是EZW算法的一种革命性扩展。

# 第9章 图像压缩标准

## 9.1 JPEG标准

JPEG是由联合图像专家组(Joint Photographic Experts Group)开发的一种图像压缩标准，JPEG是有损的图像压缩方法。

在JPEG中，DCT变换的编码效率基于下述3个特征：

* 在图像区域内，有用的图像内容变化相对缓慢。
* 在空间域内，人类对高频分量损失的感知能力远远低于低频分量损失的感知能力。在JPEG中应用DCT主要是为了减少高频内容，同时更有效地将结果编码为位串。
* 人类对灰度(黑和白)的视觉敏感度(区分相近空间线的准确度)要远远高于对彩色的敏感度。

**JPEG编码包括以下一些主要步骤：**

* 把RGB转换为YIQ或YUV，并且二次采样。
* 对图像块进行DCT变换。
* 进行量化。
* 进行Z编序和游长编码。
* 进行熵编码。

图像块DCT变换时，每个图像被划分为8x8的块，将2D DCT变换应用到每一个块图像$f(i,j)$，得到相应的输出函数——每个块的DCT变换的系数$F(u,v)$。

JPEG中量化的目标是减少压缩图像所需要的位数。它由每个频率除以一个整数，然后取整得到。量化是JPEG压缩中产生信息丢失的主要原因。在量化表右下角置较大的值，目的是在于丢弃更多的高频分量。

我们可以给$Q(u,v)$矩阵乘以比例值来改变压缩率，实际上，每个JPEG应用提供给用户的**质量因子(quality factor)**，本质上都是和缩放因子线性联系在一起的。JPEG也允许指定定制量化表并放在头部。

下一步工作是对量化后的DCT系数进行**熵编码(entropy coding)**，这一步不会造成数据的损失。不过在熵编码的准备过程中，DC系数和AC系数的处理是不同的。AC分量进行游长编码，DC分量采用DPCM编码。

JPEG的熵编码(baseline)允许使用赫夫曼编码和算术编码，这里采用赫夫曼编码，而且支持8位像素原图(或彩色图像分量)。每一个DC系数经过DPCM编码后可以用(SIZE, AMPLITUDE)表示，SIZE表示需要多少位来表示DC系数，AMPLITUDE表示实际使用的位数。SIZE进行赫夫曼编码，而AMPLITUDE不进行赫夫曼编码。

AC系数和DC系数一样，VALUE用SIZE和AMPLITUDE的方式表示，为了节省位数，RUNLENGTH和SIZE分别用4位来表示，并且整合为1字节，我们称为Symbol1。Symbol2是AMPLITUDE值，它的位数用SIZE表示。

JPEG标准支持多种模式：

* 顺序模式
* 渐进模式
* 分级模式
* 无损模式

## 9.2 JPEG 2000标准



# 第10章 基本视频压缩技术

## 10.4 H.261

$D_1 = P_1 - P_1'$。$P_1$的预测为$P_1'$，$P_1$的重建为$P_1^\~$。



* 图像层
* 块组层
* 宏块层
* 块层

## 10.5 H.263

和H.261相似，H.263在帧间编码中采用预测编码来减少时间冗余信息，对剩下的信号采用变换编码来减少空间冗余信息(如帧内编码及帧间预测的差分宏块)。

除了CIF和QCIF之外，H.263还支持sub-QCIF、4CIF和16CIF格式的视频。



运动向量(MV)不只是从当前宏块产生，MV的水平分量和垂直分量分别由当前宏块左方、上方和右上方的运动分量(MV1、MV2、MV3)的水平分量和垂直分量的平均值预测得出。



* 无限制的运动向量模式
* 基于语法的算术编码模式
* 高级预测模式
* PB帧模式



# 第11章 MPEG视频编码I：MPEG-1和MPEG-2

## 11.1 概述

运动图像专家组(MPEG)定义了一个压缩位流，也就是间接定义了解码器。而压缩算法和编码器是完全依赖于各生产商的。

## 11.2 MPEG-1

MPEG-1音频/视频数字压缩标准，用于至多对1.5Mbit/s的数字存储媒体运动图像及其伴音进行编码。

一般来说，MPEG-1采用CCIR601数字电视格式，这种格式也称为**源输入格式(Source Input Format, SIF)**，MPEG-1仅支持非隔行视频。



